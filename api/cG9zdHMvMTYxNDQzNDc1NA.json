{"title":"Android开发之玩转Android补间动画","date":"2021-02-27T14:05:15.000Z","date_formatted":{"ll":"2021年2月27日","L":"2021/02/27","MM-DD":"02-27"},"link":"posts/1614434754","comments":true,"tags":["Android","动画"],"categories":["Android"],"updated":"2021-03-03T05:20:37.287Z","content":"<p>提起动画，无论是哪种语言哪种系统框架，比如说android、iOS、H5、Flash等，动画在其之中都扮演着举足轻重的角色。Android系统中最常用的动画方式有三种：</p>\n<ul>\n<li>补间动画（Tween Animation）</li>\n<li>帧动画（Frame Animation）</li>\n<li>属性动画（Property Animation）</li>\n</ul>\n<p>本文就总结一下补间动画的相关玩法。</p>\n<a id=\"more\"></a>\n<h2 id=\"什么是补间动画\">什么是补间动画<a title=\"#什么是补间动画\" href=\"#什么是补间动画\"></a></h2>\n<blockquote>\n<p>Creates an animation by performing a series of transformations on a single image with an Animation.</p>\n</blockquote>\n<p>Tween Animation，通过 Animation 对象在图像上执行一系列的变换而形成的动画。举例来说，就是 Tween Animation 可以改变界面上显示控件的状态，如 Button 的显示、隐藏，ImageView 的尺寸缩放等等。</p>\n<h2 id=\"补间动画分类\">补间动画分类<a title=\"#补间动画分类\" href=\"#补间动画分类\"></a></h2>\n<p>补间动画包括五类动画，分别是：</p>\n<ul>\n<li>AlphaAnimation，主要用于控制 View 的可见性（显示|隐藏）。</li>\n<li>ScaleAnimation，主要用于缩放 View 大小。</li>\n<li>TranslateAnimation，主要用于移动 View 的位置。</li>\n<li>RotateAnimation，主要用于旋转 View。</li>\n<li>AnimationSet，某些场景仅靠上面单一类型的动画是无法实现的，需要多个类型的动画组合才能达到最终的效果，AnimationSet 的主要作用就是组合各类 Tween Animation。</li>\n</ul>\n<h2 id=\"补间动画的实现形式\">补间动画的实现形式<a title=\"#补间动画的实现形式\" href=\"#补间动画的实现形式\"></a></h2>\n<p>补间动画的实现形式有两种：xml创建和code实现。其中xml创建的xml动画文件要放在<code>res/anim/</code>目录下。</p>\n<ul>\n<li>res/anim/<br>\n目录下放的是视图动画的XML实现和布局动画（LayoutAnimation）</li>\n<li>res/animations/<br>\n目录下存放的是属性动画的XML实现</li>\n<li>res/drawable/<br>\n目录下存放的是帧动画的XML实现</li>\n</ul>\n<h3 id=\"alphaanimation\">AlphaAnimation<a title=\"#alphaanimation\" href=\"#alphaanimation\"></a></h3>\n<h4 id=\"通过xml创建\">通过XML创建<a title=\"#通过xml创建\" href=\"#通过xml创建\"></a></h4>\n<p><strong>语法</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">alpha</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:duration</span>=<span class=\"string\">&quot;integer&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillAfter</span>=<span class=\"string\">&quot;true|false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillBefore</span>=<span class=\"string\">&quot;true|false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillEnabled</span>=<span class=\"string\">&quot;true|false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:interpolator</span>=<span class=\"string\">&quot;@[package:]anim/interpolator_resource&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:repeatCount</span>=<span class=\"string\">&quot;infinite|integer&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:repeatMode</span>=<span class=\"string\">&quot;reverse|restart&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fromAlpha</span>=<span class=\"string\">&quot;float&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:toAlpha</span>=<span class=\"string\">&quot;float&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://note.youdao.com/yws/api/personal/file/0DFB6995C8BF407CB9BAC9B7F774A88F?method=download&amp;shareKey=a46ef930813b18d56cf35d523c152cd6\" alt=\"AlphaAnimation属性详解\" class=\"φbs\"></p>\n<p><strong>示例</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//XML定义</span><br><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">alpha</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:duration</span>=<span class=\"string\">&quot;@integer/integer_one_thousand_and_two_hundred&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillAfter</span>=<span class=\"string\">&quot;true&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fromAlpha</span>=<span class=\"string\">&quot;@integer/integer_one&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:interpolator</span>=<span class=\"string\">&quot;@android:anim/accelerate_decelerate_interpolator&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:repeatCount</span>=<span class=\"string\">&quot;infinite&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:repeatMode</span>=<span class=\"string\">&quot;reverse&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:toAlpha</span>=<span class=\"string\">&quot;@integer/integer_zero&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">//代码调用</span><br><span class=\"line\">Button mButton = (Button) findViewById(R.id.Button);</span><br><span class=\"line\">// 创建动画对象，并传入设置的动画效果xml文件</span><br><span class=\"line\">Animation alphaAnimation = AnimationUtils.loadAnimation(this, R.anim.view_animation_alpha);</span><br><span class=\"line\">// 播放动画</span><br><span class=\"line\">mButton.startAnimation(alphaAnimation);</span><br></pre></td></tr></table></figure>\n<p>其他动画XML定义形式在代码调用这部分也是类似。</p>\n<h4 id=\"通过代码实现\">通过代码实现<a title=\"#通过代码实现\" href=\"#通过代码实现\"></a></h4>\n<p><strong>语法</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AlphaAnimation alphaAnimation = <span class=\"keyword\">new</span> AlphaAnimation(<span class=\"keyword\">float</span> fromAlpha, <span class=\"keyword\">float</span> toAlpha);</span><br><span class=\"line\">alphaAnimation.setInterpolator(Interpolator i);</span><br><span class=\"line\">alphaAnimation.setDuration(<span class=\"keyword\">long</span> durationMillis);</span><br><span class=\"line\">AnimationTarget.startAnimation(alphaAnimation);</span><br></pre></td></tr></table></figure>\n<p><strong>示例</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AlphaAnimation alphaAnimation = <span class=\"keyword\">new</span> AlphaAnimation(<span class=\"number\">1.0f</span>, <span class=\"number\">0.1f</span>);</span><br><span class=\"line\">alphaAnimation.setInterpolator(<span class=\"keyword\">new</span> AccelerateInterpolator());</span><br><span class=\"line\">alphaAnimation.setFillAfter(mIsSaveAnimationState);</span><br><span class=\"line\">alphaAnimation.setDuration(<span class=\"number\">800</span>);</span><br><span class=\"line\">mTarget.startAnimation(alphaAnimation);</span><br></pre></td></tr></table></figure>\n<h3 id=\"scaleanimation\">ScaleAnimation<a title=\"#scaleanimation\" href=\"#scaleanimation\"></a></h3>\n<h4 id=\"通过xml创建-1\">通过XML创建<a title=\"#通过xml创建-1\" href=\"#通过xml创建-1\"></a></h4>\n<p><strong>语法</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">scale</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:duration</span>=<span class=\"string\">&quot;integer&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillAfter</span>=<span class=\"string\">&quot;true|false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillBefore</span>=<span class=\"string\">&quot;true|false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillEnabled</span>=<span class=\"string\">&quot;true|false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:interpolator</span>=<span class=\"string\">&quot;@[package:]anim/interpolator_resource&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:repeatCount</span>=<span class=\"string\">&quot;infinite|integer&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:repeatMode</span>=<span class=\"string\">&quot;reverse|restart&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fromXScale</span>=<span class=\"string\">&quot;float&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fromYScale</span>=<span class=\"string\">&quot;float&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:toXScale</span>=<span class=\"string\">&quot;float&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:toYScale</span>=<span class=\"string\">&quot;float&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:pivotX</span>=<span class=\"string\">&quot;float&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:pivotY</span>=<span class=\"string\">&quot;float&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    /&gt;</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://note.youdao.com/yws/api/personal/file/3502978172B947E59C1E51642949E542?method=download&amp;shareKey=d794414dc0d271ef69ed7e51315a25fb\" alt=\"ScaleAnimation属性详解\" class=\"φbs\"></p>\n<p><strong>示例</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">scale</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:duration</span>=<span class=\"string\">&quot;@integer/integer_one_thousand_and_two_hundred&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillAfter</span>=<span class=\"string\">&quot;true&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fromXScale</span>=<span class=\"string\">&quot;@fraction/percent_one_hundred&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fromYScale</span>=<span class=\"string\">&quot;@fraction/percent_one_hundred&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:interpolator</span>=<span class=\"string\">&quot;@android:anim/accelerate_decelerate_interpolator&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:pivotX</span>=<span class=\"string\">&quot;@fraction/percent_fifty&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:pivotY</span>=<span class=\"string\">&quot;@fraction/percent_fifty&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:repeatCount</span>=<span class=\"string\">&quot;infinite&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:repeatMode</span>=<span class=\"string\">&quot;reverse&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:toXScale</span>=<span class=\"string\">&quot;@fraction/percent_two_hundred&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:toYScale</span>=<span class=\"string\">&quot;@fraction/percent_two_hundred&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"通过代码实现-1\">通过代码实现<a title=\"#通过代码实现-1\" href=\"#通过代码实现-1\"></a></h4>\n<p><strong>语法</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ScaleAnimation scaleAnimation = <span class=\"keyword\">new</span> ScaleAnimation(<span class=\"keyword\">float</span> fromX, <span class=\"keyword\">float</span> toX, <span class=\"keyword\">float</span> fromY, <span class=\"keyword\">float</span> toY, <span class=\"keyword\">int</span> pivotXType, <span class=\"keyword\">float</span> pivotXValue, <span class=\"keyword\">int</span> pivotYType, <span class=\"keyword\">float</span> pivotYValue);</span><br><span class=\"line\">scaleAnimation.setInterpolator(Interpolator i);</span><br><span class=\"line\">scaleAnimation.setDuration(<span class=\"keyword\">long</span> durationMillis);</span><br><span class=\"line\">AnimationTarget.startAnimation(scaleAnimation); </span><br></pre></td></tr></table></figure>\n<p><strong>示例</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ScaleAnimation scaleAnimation = <span class=\"keyword\">new</span> ScaleAnimation(<span class=\"number\">1f</span>, <span class=\"number\">2f</span>, <span class=\"number\">1f</span>, <span class=\"number\">2f</span>, Animation.RELATIVE_TO_SELF, <span class=\"number\">0.5f</span>, Animation.RELATIVE_TO_SELF, <span class=\"number\">0.5f</span>);</span><br><span class=\"line\">scaleAnimation.setInterpolator(<span class=\"keyword\">new</span> AccelerateInterpolator());</span><br><span class=\"line\">scaleAnimation.setFillAfter(mIsSaveAnimationState);</span><br><span class=\"line\">scaleAnimation.setDuration(<span class=\"number\">800</span>);</span><br><span class=\"line\">mTarget.startAnimation(scaleAnimation);</span><br></pre></td></tr></table></figure>\n<h3 id=\"translateanimation\">TranslateAnimation<a title=\"#translateanimation\" href=\"#translateanimation\"></a></h3>\n<h4 id=\"通过xml创建-2\">通过XML创建<a title=\"#通过xml创建-2\" href=\"#通过xml创建-2\"></a></h4>\n<p><strong>语法</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">translate</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:duration</span>=<span class=\"string\">&quot;integer&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillAfter</span>=<span class=\"string\">&quot;true|false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillBefore</span>=<span class=\"string\">&quot;true|false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillEnabled</span>=<span class=\"string\">&quot;true|false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:interpolator</span>=<span class=\"string\">&quot;@[package:]anim/interpolator_resource&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:repeatCount</span>=<span class=\"string\">&quot;infinite|integer&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:repeatMode</span>=<span class=\"string\">&quot;reverse|restart&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fromXDelta</span>=<span class=\"string\">&quot;float&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fromYDelta</span>=<span class=\"string\">&quot;float&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:toXDelta</span>=<span class=\"string\">&quot;float&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:toYDelta</span>=<span class=\"string\">&quot;float&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">    /&gt;</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://note.youdao.com/yws/api/personal/file/C87AB2D207D04A65A2B52F7FE6B65039?method=download&amp;shareKey=4899e93f9974ebf5aae3a6ebe490c230\" alt=\"TranslateAnimation属性详解\" class=\"φbs\"></p>\n<p><strong>示例</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">translate</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:duration</span>=<span class=\"string\">&quot;1200&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillAfter</span>=<span class=\"string\">&quot;true&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fromXDelta</span>=<span class=\"string\">&quot;0&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fromYDelta</span>=<span class=\"string\">&quot;0&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:interpolator</span>=<span class=\"string\">&quot;@anim/overshoot_interpolator&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:toXDelta</span>=<span class=\"string\">&quot;0&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:toYDelta</span>=<span class=\"string\">&quot;50%p&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"通过代码实现-2\">通过代码实现<a title=\"#通过代码实现-2\" href=\"#通过代码实现-2\"></a></h4>\n<p><strong>语法</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TranslateAnimation translateAnimation = <span class=\"keyword\">new</span> TranslateAnimation(<span class=\"keyword\">float</span> fromXDelta, <span class=\"keyword\">float</span> toXDelta, <span class=\"keyword\">float</span> fromYDelta, <span class=\"keyword\">float</span> toYDelta);</span><br><span class=\"line\">translateAnimation.setInterpolator(Interpolator i);</span><br><span class=\"line\">translateAnimation.setDuration(<span class=\"keyword\">long</span> durationMillis);</span><br><span class=\"line\">AnimationTarget.startAnimation(translateAnimation); </span><br></pre></td></tr></table></figure>\n<p><strong>示例</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TranslateAnimation translateAnimation = <span class=\"keyword\">new</span> TranslateAnimation(<span class=\"number\">0f</span>, <span class=\"number\">200f</span>, <span class=\"number\">0f</span>, <span class=\"number\">200f</span>);</span><br><span class=\"line\">translateAnimation.setInterpolator(<span class=\"keyword\">new</span> AccelerateInterpolator());</span><br><span class=\"line\">translateAnimation.setFillAfter(mIsSaveAnimationState);</span><br><span class=\"line\">translateAnimation.setDuration(<span class=\"number\">800</span>);</span><br><span class=\"line\">mTarget.startAnimation(translateAnimation);</span><br></pre></td></tr></table></figure>\n<h3 id=\"rotateanimation\">RotateAnimation<a title=\"#rotateanimation\" href=\"#rotateanimation\"></a></h3>\n<h4 id=\"通过xml创建-3\">通过XML创建<a title=\"#通过xml创建-3\" href=\"#通过xml创建-3\"></a></h4>\n<p><strong>语法</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">rotate</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:duration</span>=<span class=\"string\">&quot;integer&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillAfter</span>=<span class=\"string\">&quot;true|false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillBefore</span>=<span class=\"string\">&quot;true|false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillEnabled</span>=<span class=\"string\">&quot;true|false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:interpolator</span>=<span class=\"string\">&quot;@[package:]anim/interpolator_resource&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:repeatCount</span>=<span class=\"string\">&quot;infinite|integer&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:repeatMode</span>=<span class=\"string\">&quot;reverse|restart&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fromDegrees</span>=<span class=\"string\">&quot;float&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:toDegrees</span>=<span class=\"string\">&quot;float&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:pivotX</span>=<span class=\"string\">&quot;float&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:pivotY</span>=<span class=\"string\">&quot;float&quot;</span> </span></span><br><span class=\"line\"><span class=\"tag\">    /&gt;</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://note.youdao.com/yws/api/personal/file/395C4D8558E142C1B91B54DCC0EADB7B?method=download&amp;shareKey=c411f400ed9d8124cf7cb2825c05b08f\" alt=\"RotateAnimation属性详解\" class=\"φbs\"></p>\n<p><strong>示例</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">rotate</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:duration</span>=<span class=\"string\">&quot;1200&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillAfter</span>=<span class=\"string\">&quot;true&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fromDegrees</span>=<span class=\"string\">&quot;0&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:interpolator</span>=<span class=\"string\">&quot;@android:anim/accelerate_decelerate_interpolator&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:toDegrees</span>=<span class=\"string\">&quot;360&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"通过代码实现-3\">通过代码实现<a title=\"#通过代码实现-3\" href=\"#通过代码实现-3\"></a></h4>\n<p><strong>语法</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">RotateAnimation rotateAnimation = <span class=\"keyword\">new</span> RotateAnimation(<span class=\"keyword\">float</span> fromDegrees, <span class=\"keyword\">float</span> toDegrees, <span class=\"keyword\">int</span> pivotXType, <span class=\"keyword\">float</span> pivotXValue, <span class=\"keyword\">int</span> pivotYType, <span class=\"keyword\">float</span> pivotYValue);</span><br><span class=\"line\">rotateAnimation.setInterpolator(Interpolator i);</span><br><span class=\"line\">rotateAnimation.setDuration(<span class=\"keyword\">long</span> durationMillis);</span><br><span class=\"line\">AnimationTarget.startAnimation(rotateAnimation); </span><br></pre></td></tr></table></figure>\n<p><strong>示例</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">RotateAnimation rotateAnimation = <span class=\"keyword\">new</span> RotateAnimation(<span class=\"keyword\">float</span> fromDegrees, <span class=\"keyword\">float</span> toDegrees, <span class=\"keyword\">int</span> pivotXType, <span class=\"keyword\">float</span> pivotXValue, <span class=\"keyword\">int</span> pivotYType, <span class=\"keyword\">float</span> pivotYValue);</span><br><span class=\"line\">rotateAnimation.setInterpolator(Interpolator i);</span><br><span class=\"line\">rotateAnimation.setDuration(<span class=\"keyword\">long</span> durationMillis);</span><br><span class=\"line\">AnimationTarget.startAnimation(rotateAnimation); </span><br></pre></td></tr></table></figure>\n<h3 id=\"animationset\">AnimationSet<a title=\"#animationset\" href=\"#animationset\"></a></h3>\n<h4 id=\"通过xml创建-4\">通过XML创建<a title=\"#通过xml创建-4\" href=\"#通过xml创建-4\"></a></h4>\n<p><strong>语法</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">set</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:interpolator</span>=<span class=\"string\">&quot;@[package:]anim/interpolator_resource&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:shareInterpolator</span>=<span class=\"string\">[</span>&quot;<span class=\"attr\">true</span>&quot; | &quot;<span class=\"attr\">false</span>&quot;] &gt;</span></span><br><span class=\"line\">    &lt;alpha</span><br><span class=\"line\">        android:fromAlpha=&quot;float&quot;</span><br><span class=\"line\">        android:toAlpha=&quot;float&quot; /&gt;</span><br><span class=\"line\">    &lt;scale</span><br><span class=\"line\">        android:fromXScale=&quot;float&quot;</span><br><span class=\"line\">        android:toXScale=&quot;float&quot;</span><br><span class=\"line\">        android:fromYScale=&quot;float&quot;</span><br><span class=\"line\">        android:toYScale=&quot;float&quot;</span><br><span class=\"line\">        android:pivotX=&quot;float&quot;</span><br><span class=\"line\">        android:pivotY=&quot;float&quot; /&gt;</span><br><span class=\"line\">    &lt;translate</span><br><span class=\"line\">        android:fromXDelta=&quot;float&quot;</span><br><span class=\"line\">        android:toXDelta=&quot;float&quot;</span><br><span class=\"line\">        android:fromYDelta=&quot;float&quot;</span><br><span class=\"line\">        android:toYDelta=&quot;float&quot; /&gt;</span><br><span class=\"line\">    &lt;rotate</span><br><span class=\"line\">        android:fromDegrees=&quot;float&quot;</span><br><span class=\"line\">        android:toDegrees=&quot;float&quot;</span><br><span class=\"line\">        android:pivotX=&quot;float&quot;</span><br><span class=\"line\">        android:pivotY=&quot;float&quot; /&gt;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">set</span>&gt;</span></span><br><span class=\"line\">        ...</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">set</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">set</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://note.youdao.com/yws/api/personal/file/DE66F6FCC44B4930A541F672A71C82C9?method=download&amp;shareKey=6c314646acdcf85ddd876d06dd21a102\" alt=\"AnimationSet属性详解\" class=\"φbs\"></p>\n<p><strong>示例</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">set</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:duration</span>=<span class=\"string\">&quot;@integer/integer_three_thousand&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillAfter</span>=<span class=\"string\">&quot;true&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:shareInterpolator</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span></span><br><span class=\"line\">    &lt;translate</span><br><span class=\"line\">        android:fromXDelta=&quot;@integer/integer_zero&quot;</span><br><span class=\"line\">        android:fromYDelta=&quot;@integer/integer_zero&quot;</span><br><span class=\"line\">        android:toXDelta=&quot;@integer/integer_zero&quot;</span><br><span class=\"line\">        android:toYDelta=&quot;@integer/integer_two_hundred&quot; /&gt;</span><br><span class=\"line\">    &lt;alpha</span><br><span class=\"line\">        android:fromAlpha=&quot;@integer/integer_one&quot;</span><br><span class=\"line\">        android:toAlpha=&quot;@fraction/scale_smaller&quot; /&gt;</span><br><span class=\"line\">    &lt;rotate</span><br><span class=\"line\">        android:fromDegrees=&quot;@integer/integer_zero&quot;</span><br><span class=\"line\">        android:pivotX=&quot;@fraction/percent_fifty&quot;</span><br><span class=\"line\">        android:pivotY=&quot;@fraction/percent_fifty&quot;</span><br><span class=\"line\">        android:toDegrees=&quot;@integer/integer_seven_hundred_and_five&quot; /&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">set</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h4 id=\"通过代码实现-4\">通过代码实现<a title=\"#通过代码实现-4\" href=\"#通过代码实现-4\"></a></h4>\n<p><strong>语法</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AnimationSet animationSet = <span class=\"keyword\">new</span> AnimationSet(<span class=\"keyword\">boolean</span> shareInterpolator);</span><br><span class=\"line\">animationSet.addAnimation(Animation a)</span><br><span class=\"line\">...</span><br><span class=\"line\">AnimationTarget.startAnimation(animationSet);</span><br></pre></td></tr></table></figure>\n<p><strong>示例</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AlphaAnimation alphaAnimation = <span class=\"keyword\">new</span> AlphaAnimation(<span class=\"number\">1.0f</span>, <span class=\"number\">0.5f</span>);</span><br><span class=\"line\">alphaAnimation.setInterpolator(<span class=\"keyword\">new</span> AccelerateInterpolator());</span><br><span class=\"line\">alphaAnimation.setFillAfter(mIsSaveAnimationState);</span><br><span class=\"line\">alphaAnimation.setDuration(<span class=\"number\">800</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">ScaleAnimation scaleAnimation = <span class=\"keyword\">new</span> ScaleAnimation(<span class=\"number\">1f</span>, <span class=\"number\">2f</span>, <span class=\"number\">1f</span>, <span class=\"number\">2f</span>, Animation.RELATIVE_TO_SELF, <span class=\"number\">0.5f</span>, Animation.RELATIVE_TO_SELF, <span class=\"number\">0.5f</span>);</span><br><span class=\"line\">scaleAnimation.setInterpolator(<span class=\"keyword\">new</span> AccelerateInterpolator());</span><br><span class=\"line\">scaleAnimation.setFillAfter(mIsSaveAnimationState);</span><br><span class=\"line\">scaleAnimation.setDuration(<span class=\"number\">800</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">RotateAnimation rotateAnimation = <span class=\"keyword\">new</span> RotateAnimation(<span class=\"number\">0f</span>, <span class=\"number\">360f</span>, Animation.RELATIVE_TO_SELF, <span class=\"number\">0.5f</span>, Animation.RELATIVE_TO_SELF, <span class=\"number\">0.5f</span>);</span><br><span class=\"line\">rotateAnimation.setInterpolator(<span class=\"keyword\">new</span> AccelerateInterpolator());</span><br><span class=\"line\">rotateAnimation.setFillAfter(mIsSaveAnimationState);</span><br><span class=\"line\">rotateAnimation.setDuration(<span class=\"number\">800</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">AnimationSet animationSet = <span class=\"keyword\">new</span> AnimationSet(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">animationSet.setFillAfter(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">animationSet.addAnimation(alphaAnimation);</span><br><span class=\"line\">animationSet.addAnimation(scaleAnimation);</span><br><span class=\"line\">animationSet.addAnimation(rotateAnimation);</span><br><span class=\"line\">mTarget.startAnimation(animationSet);</span><br></pre></td></tr></table></figure>\n<h2 id=\"动画监听\">动画监听<a title=\"#动画监听\" href=\"#动画监听\"></a></h2>\n<p>Animation类通过监听动画开始 / 结束 / 重复时刻可以进行一系列自定义操作，如跳转页面等等。通过在 Java 代码里setAnimationListener()方法设置：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Animation.addListener(<span class=\"keyword\">new</span> AnimatorListener() &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onAnimationStart</span><span class=\"params\">(Animation animation)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//动画开始时执行</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">     <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onAnimationRepeat</span><span class=\"params\">(Animation animation)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//动画重复时执行</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onAnimationCancel</span><span class=\"params\">()</span><span class=\"params\">(Animation animation)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//动画取消时执行</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onAnimationEnd</span><span class=\"params\">(Animation animation)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//动画结束时执行</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>采取上述方法监听动画，每次监听都必须重写4个方法，有些时候我们只需要实现其中一个，因此其余的很累赘，我们可以采用动画适配器AnimatorListenerAdapter来针对化的实现：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 向addListener()方法中传入适配器对象AnimatorListenerAdapter()</span></span><br><span class=\"line\">anim.addListener(<span class=\"keyword\">new</span> AnimatorListenerAdapter() &#123;  </span><br><span class=\"line\">    <span class=\"meta\">@Override</span>  </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onAnimationStart</span><span class=\"params\">(Animator animation)</span> </span>&#123;  </span><br><span class=\"line\">    <span class=\"comment\">// 如想只想监听动画开始时刻，就只需要单独重写该方法就可以</span></span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;);  </span><br></pre></td></tr></table></figure>\n<h2 id=\"插值器\">插值器<a title=\"#插值器\" href=\"#插值器\"></a></h2>\n<p>细心的同学观察到以上动画属性中几乎都存在一个插值器属性。插值器是动画执行速率调节器，主要用来控制动画的变化率。</p>\n<h3 id=\"常用的插值器汇总\">常用的插值器汇总<a title=\"#常用的插值器汇总\" href=\"#常用的插值器汇总\"></a></h3>\n<p><img src=\"https://note.youdao.com/yws/api/personal/file/76B17E814886426A8E63D89E9C0199A9?method=download&amp;shareKey=c71f560f883e9a2da0c50fe74dc42398\" alt=\"常用的插值器汇总\" class=\"φbs\"></p>\n<h3 id=\"自定义插值器\">自定义插值器<a title=\"#自定义插值器\" href=\"#自定义插值器\"></a></h3>\n<p>自定义插值器同样可以有两种方式：XML和CODE。</p>\n<h4 id=\"通过xml自定义\">通过XML自定义<a title=\"#通过xml自定义\" href=\"#通过xml自定义\"></a></h4>\n<p>通过 XML 自定义插值器的时候，限制性比较大，因为系统只提供了部分插值器的自定义，如 AccelerateInterpolator，有些插值器是不支持自定义的，如 AccelerateDecelerateInterpolator。</p>\n<p>我们看看AccelerateInterpolator如何自定义，AccelerateInterpolator中可以自定义的属性只有：<code>android:factor</code>，表示加速的比率（The acceleration rate），默认值为 1。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- custom accelerateInterpolator --&gt;</span> </span><br><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">accelerateInterpolator</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:factor</span>=<span class=\"string\">&quot;4.0&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">translate</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:duration</span>=<span class=\"string\">&quot;1200&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillAfter</span>=<span class=\"string\">&quot;true&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillBefore</span>=<span class=\"string\">&quot;false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fillEnabled</span>=<span class=\"string\">&quot;false&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fromXDelta</span>=<span class=\"string\">&quot;0&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fromYDelta</span>=<span class=\"string\">&quot;0&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:interpolator</span>=<span class=\"string\">&quot;@android:anim/custom_accelerate_interpolator&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:toXDelta</span>=<span class=\"string\">&quot;40%p&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:toYDelta</span>=<span class=\"string\">&quot;0&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<p>可以通过 XML 自定义插值器，除了 AccelerateInterpolator，还有很多，以下是具体列表：</p>\n<p><img src=\"https://note.youdao.com/yws/api/personal/file/CCF622DE5733450FA95B031AFB7D5B17?method=download&amp;shareKey=c6df9cdef5488489acc8f24f39dc1da5\" alt=\"可通过XML自定义的插值器\" class=\"φbs\"></p>\n<h4 id=\"通过代码自定义\">通过代码自定义<a title=\"#通过代码自定义\" href=\"#通过代码自定义\"></a></h4>\n<p>通过 CODE 自定义插值器就没有那么多限制， 也很简单，只要实现 Interpolator 接口，并实现其中的方法（getInterpolation）就好了。接下来，我们先看下 Google 官方是如何实现插值器的。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//AccelerateDecelerateInterpolator</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">package</span> android.view.animation;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</span><br><span class=\"line\"><span class=\"keyword\">import</span> android.util.AttributeSet;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.android.internal.view.animation.HasNativeInterpolator;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.android.internal.view.animation.NativeInterpolatorFactory;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.android.internal.view.animation.NativeInterpolatorFactoryHelper;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * An interpolator where the rate of change starts and ends slowly but</span></span><br><span class=\"line\"><span class=\"comment\"> * accelerates through the middle.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@HasNativeInterpolator</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AccelerateDecelerateInterpolator</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseInterpolator</span></span></span><br><span class=\"line\"><span class=\"class\">        <span class=\"keyword\">implements</span> <span class=\"title\">NativeInterpolatorFactory</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">AccelerateDecelerateInterpolator</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@SuppressWarnings(&#123;&quot;UnusedDeclaration&quot;&#125;)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">AccelerateDecelerateInterpolator</span><span class=\"params\">(Context context, AttributeSet attrs)</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">float</span> <span class=\"title\">getInterpolation</span><span class=\"params\">(<span class=\"keyword\">float</span> input)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (<span class=\"keyword\">float</span>)(Math.cos((input + <span class=\"number\">1</span>) * Math.PI) / <span class=\"number\">2.0f</span>) + <span class=\"number\">0.5f</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/** <span class=\"doctag\">@hide</span> */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">long</span> <span class=\"title\">createNativeInterpolator</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> NativeInterpolatorFactoryHelper.createAccelerateDecelerateInterpolator();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>通过代码可知，AccelerateDecelerateInterpolator 是通过余弦函数实现的。在 AccelerateDecelerateInterpolator 中，加速的过程是函数曲线斜率逐渐增大的过程，减速的过程是函数曲线斜率逐渐减小的过程。</p>\n<p><img src=\"https://note.youdao.com/yws/api/personal/file/EF5EB85D0E694ED38F30E06A8D0BAED5?method=download&amp;shareKey=1cef30c6959e309525a4deebe21ed256\" alt=\"AccelerateDecelerateInterpolator插值器原理图\" class=\"φbs\"></p>\n<p>明白了AccelerateDecelerateInterpolator插值器原理之后，我们用正切函数实现一个 DecelerateAccelerateInterpolator。（快-慢-快）</p>\n<p><img src=\"https://note.youdao.com/yws/api/personal/file/8DEEC88A33C047F7A38F46C640DC88A6?method=download&amp;shareKey=5589a15dc347400755d2821aebe77dda\" alt=\"自定义DecelerateAccelerateInterpolator插值器\" class=\"φbs\"></p>\n<p>1.Interpolator 接口中 getInterpolation 方法中 input 的取值范围为 [0,1]，而蓝色框圈出的 X 的取值范围为 [-π/4,π/4]，所以，需要将 [0,1] 转换为 [-π/4,π/4]：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">π&#x2F;2 * input - π&#x2F;4</span><br></pre></td></tr></table></figure>\n<p>2.正切函数在 [-π/4,π/4] 取值范围内，相应的函数值的取值范围为[-1,1]，而 getInterpolation 最终返回值的取值范围为 [0,1]，所以，需要将 [-1,1] 转换为 [0,1]：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(tan(π/<span class=\"number\">2</span> * input - π/<span class=\"number\">4</span>) + <span class=\"number\">1</span>)/<span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n<p>所以代码实现过程：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//自定义</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DecelerateAccelerateInterpolator</span> <span class=\"keyword\">implements</span> <span class=\"title\">Interpolator</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">float</span> <span class=\"title\">getInterpolation</span><span class=\"params\">(<span class=\"keyword\">float</span> input)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (<span class=\"keyword\">float</span>) ((Math.tan(Math.PI/<span class=\"number\">2</span> * input - Math.PI/<span class=\"number\">4</span>) + <span class=\"number\">1</span>)/<span class=\"number\">2</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//调用</span></span><br><span class=\"line\">TranslateAnimation translateAnimation = <span class=\"keyword\">new</span> TranslateAnimation(<span class=\"number\">0f</span>, <span class=\"number\">0f</span>, <span class=\"number\">0f</span>, <span class=\"number\">800f</span>);</span><br><span class=\"line\">translateAnimation.setInterpolator(<span class=\"keyword\">new</span> DecelerateAccelerateInterpolator());</span><br><span class=\"line\">translateAnimation.setFillAfter(mIsSaveAnimationState);</span><br><span class=\"line\">translateAnimation.setDuration(<span class=\"number\">1800</span>);</span><br><span class=\"line\">mTarget.startAnimation(translateAnimation);</span><br></pre></td></tr></table></figure>\n<h2 id=\"使用场景\">使用场景<a title=\"#使用场景\" href=\"#使用场景\"></a></h2>\n<p>补间动画常用于视图View的一些标准动画效果：平移、旋转、缩放，透明度等，除了常规的动画使用，补间动画还有一些特殊的应用场景，例如Activity和Fragment的切换动效以及视图组（ViewGroup）中子元素的出场效果。</p>\n<h3 id=\"activity-的切换效果\">Activity 的切换效果<a title=\"#activity-的切换效果\" href=\"#activity-的切换效果\"></a></h3>\n<p>页面进入动画：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Intent intent = <span class=\"keyword\">new</span> Intent (<span class=\"keyword\">this</span>,Acvtivity.class);</span><br><span class=\"line\">startActivity(intent);</span><br><span class=\"line\"><span class=\"comment\">// enter_anim（b页面的进场动画），exit_anim（a页面的消失动画）</span></span><br><span class=\"line\"><span class=\"comment\">// 特别注意：overridePendingTransition（）必须要在startActivity(intent)后被调用才能生效</span></span><br><span class=\"line\">overridePendingTransition(R.anim.enter_anim,R.anim.exit_anim);</span><br></pre></td></tr></table></figure>\n<p>页面退出动画：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">finish</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.finish();</span><br><span class=\"line\">    <span class=\"comment\">// 特别注意: overridePendingTransition（）必须要在finish()后被调用才能生效</span></span><br><span class=\"line\">    overridePendingTransition(R.anim.enter_anim,R.anim.exit_anim);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>系统自带的效果<code>android.R.anim.xxx</code>：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 淡入淡出的动画效果      </span></span><br><span class=\"line\">overridePendingTransition(android.R.anim.fade_in, android.R.anim.fade_out);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 从左向右滑动的效果</span></span><br><span class=\"line\">overridePendingTransition(android.R.anim.slide_in_left, android.R.anim.slide_out_right);</span><br></pre></td></tr></table></figure>\n<h3 id=\"fragment-切换效果\">Fragment 切换效果<a title=\"#fragment-切换效果\" href=\"#fragment-切换效果\"></a></h3>\n<p>系统自带的切换效果：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FragmentTransaction fragmentTransaction = mFragmentManager.beginTransaction();</span><br><span class=\"line\"><span class=\"comment\">// 通过setTransition(int transit)进行设置</span></span><br><span class=\"line\"><span class=\"comment\">// transit参数说明</span></span><br><span class=\"line\"><span class=\"comment\">// 1. FragmentTransaction.TRANSIT_NONE：无动画</span></span><br><span class=\"line\"><span class=\"comment\">// 2. FragmentTransaction.TRANSIT_FRAGMENT_OPEN：标准的打开动画效果</span></span><br><span class=\"line\"><span class=\"comment\">// 3. FragmentTransaction.TRANSIT_FRAGMENT_CLOSE：标准的关闭动画效果</span></span><br><span class=\"line\"><span class=\"comment\">// 标准动画设置好后，在Fragment添加和移除的时候都会有。</span></span><br><span class=\"line\">fragmentTransaction.setTransition(<span class=\"keyword\">int</span> transit);</span><br></pre></td></tr></table></figure>\n<p>自定义动画效果：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FragmentTransaction fragmentTransaction = mFragmentManager.beginTransaction();</span><br><span class=\"line\"><span class=\"comment\">// 采用`FragmentTransavtion`的 `setCustomAnimations（）`进行设置</span></span><br><span class=\"line\">fragmentTransaction.setCustomAnimations(R.anim.in_from_right,R.anim.out_to_left);</span><br></pre></td></tr></table></figure>\n<h3 id=\"视图组（viewgroup）中子元素的出场效果\">视图组（ViewGroup）中子元素的出场效果<a title=\"#视图组（viewgroup）中子元素的出场效果\" href=\"#视图组（viewgroup）中子元素的出场效果\"></a></h3>\n<p>有些时候我们想为ViewGroup中的子元素的出场统一动画规则，那么我们可以这样做：</p>\n<p>1.定义子元素统一出场动画：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class=\"line\">// 此处采用了组合动画</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">set</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span> &gt;</span></span><br><span class=\"line\">    android:duration=&quot;3000&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;alpha</span><br><span class=\"line\">        android:duration=&quot;1500&quot;</span><br><span class=\"line\">        android:fromAlpha=&quot;1.0&quot;</span><br><span class=\"line\">        android:toAlpha=&quot;0.0&quot; /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    &lt;translate</span><br><span class=\"line\">        android:fromXDelta=&quot;500&quot;</span><br><span class=\"line\">        android:toXDelta=&quot;0&quot;</span><br><span class=\"line\">         /&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">set</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>2.定义视图组（ViewGroup）动画管理规则：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class=\"line\">// 采用LayoutAnimation标签</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">layoutAnimation</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    // 子元素开始动画的时间延迟</span></span><br><span class=\"line\"><span class=\"tag\">    // 如子元素入场动画的时间总长设置为<span class=\"attr\">300ms</span></span></span><br><span class=\"line\"><span class=\"tag\">    // 那么 <span class=\"attr\">delay</span> = <span class=\"string\">&quot;0.5&quot;</span> 表示每个子元素都会延迟<span class=\"attr\">150ms</span>才会播放动画效果</span></span><br><span class=\"line\"><span class=\"tag\">    // 第一个子元素延迟<span class=\"attr\">150ms</span>播放入场效果；第二个延迟<span class=\"attr\">300ms</span>，以此类推</span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:delay</span>=<span class=\"string\">&quot;0.5&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">   </span></span><br><span class=\"line\"><span class=\"tag\">    // 表示子元素动画的顺序</span></span><br><span class=\"line\"><span class=\"tag\">    // 可设置属性为：</span></span><br><span class=\"line\"><span class=\"tag\">    // <span class=\"attr\">1.</span> <span class=\"attr\">normal</span> ：顺序显示，即排在前面的子元素先播放入场动画</span></span><br><span class=\"line\"><span class=\"tag\">    // <span class=\"attr\">2.</span> <span class=\"attr\">reverse</span>：倒序显示，即排在后面的子元素先播放入场动画</span></span><br><span class=\"line\"><span class=\"tag\">    // <span class=\"attr\">3.</span> <span class=\"attr\">random</span>：随机播放入场动画</span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:animationOrder</span>=<span class=\"string\">&quot;normal&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    </span></span><br><span class=\"line\"><span class=\"tag\">    // 设置入场的具体动画效果</span></span><br><span class=\"line\"><span class=\"tag\">    // 将步骤<span class=\"attr\">1</span>的子元素出场动画设置到这里</span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:animation</span>=<span class=\"string\">&quot;@anim/view_animation&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    /&gt;</span></span><br></pre></td></tr></table></figure>\n<p>3.为视图组（ViewGroup）指定andorid:layoutAnimation属性，这里有两种方式：xml设置和code设置。</p>\n<p>方式1：在 XML 中指定：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">&quot;match_parent&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:background</span>=<span class=\"string\">&quot;#FFFFFF&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:orientation</span>=<span class=\"string\">&quot;vertical&quot;</span> &gt;</span></span><br><span class=\"line\">    &lt;ListView</span><br><span class=\"line\">        android:id=&quot;@+id/listView1&quot;</span><br><span class=\"line\">        android:layoutAnimation=&quot;@anim/anim_layout&quot;</span><br><span class=\"line\">        // 指定layoutAnimation属性用以指定子元素的入场动画</span><br><span class=\"line\">        android:layout_width=&quot;match_parent&quot;</span><br><span class=\"line\">        android:layout_height=&quot;match_parent&quot; /&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>方式2：在Java代码中指定【这样就不用额外设置res/ anim /anim_layout.xml该xml文件了】:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ListView lv = (ListView) findViewById(R.id.listView1);</span><br><span class=\"line\"><span class=\"comment\">// 加载子元素的出场动画</span></span><br><span class=\"line\">Animation animation = AnimationUtils.loadAnimation(<span class=\"keyword\">this</span>,R.anim.anim_item);</span><br><span class=\"line\"><span class=\"comment\">// 设置LayoutAnimation的属性</span></span><br><span class=\"line\">LayoutAnimationController controller = <span class=\"keyword\">new</span> LayoutAnimationController(animation);</span><br><span class=\"line\">controller.setDelay(<span class=\"number\">0.5f</span>);</span><br><span class=\"line\">controller.setOrder(LayoutAnimationController.ORDER_NORMAL);</span><br><span class=\"line\"><span class=\"comment\">// 为ListView设置LayoutAnimation的属性</span></span><br><span class=\"line\">lv.setLayoutAnimation(controller);</span><br></pre></td></tr></table></figure>\n<h2 id=\"参考\">参考<a title=\"#参考\" href=\"#参考\"></a></h2>\n<ul>\n<li><a href=\"https://developer.android.google.cn/guide/topics/resources/animation-resource#Tween\">https://developer.android.google.cn/guide/topics/resources/animation-resource#Tween</a></li>\n<li><a href=\"https://juejin.cn/post/6844903793713233927#heading-64\">https://juejin.cn/post/6844903793713233927#heading-64</a></li>\n<li><a href=\"https://blog.csdn.net/carson_ho/article/details/72827747\">https://blog.csdn.net/carson_ho/article/details/72827747</a></li>\n</ul>\n","prev":{"title":"Android开发之玩转Android帧动画","link":"posts/1614486338"},"next":{"title":"你知道ImageView的ScaleType怎么用吗","link":"posts/1614424714"},"plink":"https://blog.ixin.run/posts/1614434754/","toc":[{"id":"什么是补间动画","title":"什么是补间动画","index":"1"},{"id":"补间动画分类","title":"补间动画分类","index":"2"},{"id":"补间动画的实现形式","title":"补间动画的实现形式","index":"3","children":[{"id":"alphaanimation","title":"AlphaAnimation","index":"3.1"},{"id":"scaleanimation","title":"ScaleAnimation","index":"3.2"},{"id":"translateanimation","title":"TranslateAnimation","index":"3.3"},{"id":"rotateanimation","title":"RotateAnimation","index":"3.4"},{"id":"animationset","title":"AnimationSet","index":"3.5"}]},{"id":"动画监听","title":"动画监听","index":"4"},{"id":"插值器","title":"插值器","index":"5","children":[{"id":"常用的插值器汇总","title":"常用的插值器汇总","index":"5.1"},{"id":"自定义插值器","title":"自定义插值器","index":"5.2"}]},{"id":"使用场景","title":"使用场景","index":"6","children":[{"id":"activity-的切换效果","title":"Activity 的切换效果","index":"6.1"},{"id":"fragment-切换效果","title":"Fragment 切换效果","index":"6.2"},{"id":"视图组（viewgroup）中子元素的出场效果","title":"视图组（ViewGroup）中子元素的出场效果","index":"6.3"}]},{"id":"参考","title":"参考","index":"7"}],"reward":true,"copyright":{"author":"i猩人","link":"<a href=\"https://blog.ixin.run/posts/1614434754/\" title=\"Android开发之玩转Android补间动画\">https://blog.ixin.run/posts/1614434754/</a>","license":"本文遵循<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\"rel=\"external nofollow\" target=\"_blank\"> CC 4.0 BY-SA </a>版权协议，转载请附上原文出处链接及本声明。"}}