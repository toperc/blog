{"title":"Android开发Style和Theme知识面总结","date":"2021-03-05T15:39:22.000Z","date_formatted":{"ll":"2021年3月5日","L":"2021/03/05","MM-DD":"03-05"},"link":"posts/1614958762","comments":true,"tags":["Android","自定义View"],"categories":["Android"],"updated":"2021-03-10T01:15:14.474Z","content":"<p>这块知识大部分同学都知道，但是同样比较碎，比如说定义一个Style，到底该用于主题还是用于某个view？再比如说Style的继承应该怎么用？等等…本文我将尽可能全面的将这块知识点总结一下。</p>\n<a id=\"more\"></a>\n<h2 id=\"资源位置\">资源位置<a title=\"#资源位置\" href=\"#资源位置\"></a></h2>\n<p>开发过程中style和theme等这些资源文件会放在<code>res/values/</code>文件夹下，都是xml文件。</p>\n<ul>\n<li>attrs.xml</li>\n<li>colors.xml</li>\n<li>dimens.xml</li>\n<li>string.xml</li>\n<li>arrays.xml</li>\n<li>styles.xml</li>\n<li>themes.xml</li>\n</ul>\n<p>以上这些xml文件项目中没有的话可以新建，xml命名一般会在结尾带一个’s’，表示里面的内容不止一个。另外命名也可以根据项目模块加以区分，例如<code>main_strings.xml</code>，更容易管理。</p>\n<h2 id=\"attrs.xml\">attrs.xml<a title=\"#attrs.xml\" href=\"#attrs.xml\"></a></h2>\n<p>该文件主要定义一些自定义view的<strong>属性声明</strong>。</p>\n<h3 id=\"属性声明\">属性声明<a title=\"#属性声明\" href=\"#属性声明\"></a></h3>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resources</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_str&quot;</span> <span class=\"attr\">format</span>=<span class=\"string\">&quot;string&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">attr</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_bool&quot;</span> <span class=\"attr\">format</span>=<span class=\"string\">&quot;boolean&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">attr</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_int&quot;</span> <span class=\"attr\">format</span>=<span class=\"string\">&quot;integer&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">attr</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_ref&quot;</span> <span class=\"attr\">format</span>=<span class=\"string\">&quot;reference&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">attr</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>其中 name表示属性名，format表示其接受的输入格式。format还有其它格式，如：</p>\n<ul>\n<li>color – 颜色值</li>\n<li>dimension – 尺寸</li>\n<li>float – 浮点值</li>\n<li>fraction – 百分比</li>\n<li>enum – 枚举</li>\n<li>flag – 位或运算</li>\n<li>混合类型 – 多种format结合</li>\n</ul>\n<p>enum和flag声明（可以不指定format），如下：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resources</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_enum&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">enum</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;first&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">enum</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">enum</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;second&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">enum</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">enum</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;third&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">enum</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">attr</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_flag&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">flag</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;east&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;0x1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">flag</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">flag</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;west&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;0x2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">flag</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">flag</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;south&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;0x3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">flag</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">flag</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;north&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;0x4&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">flag</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">attr</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>开发过程中自定义view的属性声明并不采用在<code>&lt;resources/&gt;</code>中直接声明<code>&lt;attr/&gt;</code>的形式，因为一个attrs.xml中可以有多个view的属性声明，可采用<code>declare-styleable</code>声明每个view的属性组（TypedArray）：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resources</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">declare-styleable</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;MyStyleable&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_str&quot;</span> <span class=\"attr\">format</span>=<span class=\"string\">&quot;string&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">attr</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_bool&quot;</span> <span class=\"attr\">format</span>=<span class=\"string\">&quot;boolean&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">attr</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_int&quot;</span> <span class=\"attr\">format</span>=<span class=\"string\">&quot;integer&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">attr</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_ref&quot;</span> <span class=\"attr\">format</span>=<span class=\"string\">&quot;reference&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">attr</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">declare-styleable</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>一个attrs.xml文件中有多个view共有的属性我们可以抽取出来：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resources</span>&gt;</span></span><br><span class=\"line\">    //共有的attr_ref属性抽取出来</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_ref&quot;</span> <span class=\"attr\">format</span>=<span class=\"string\">&quot;reference&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">attr</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    //view0</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">declare-styleable</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;MyStyleable0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_str&quot;</span> <span class=\"attr\">format</span>=<span class=\"string\">&quot;string&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">attr</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_bool&quot;</span> <span class=\"attr\">format</span>=<span class=\"string\">&quot;boolean&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">attr</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_int&quot;</span> <span class=\"attr\">format</span>=<span class=\"string\">&quot;integer&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">attr</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_ref&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">declare-styleable</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    //view1</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">declare-styleable</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;MyStyleable0&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_str&quot;</span> <span class=\"attr\">format</span>=<span class=\"string\">&quot;string&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">attr</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_bool&quot;</span> <span class=\"attr\">format</span>=<span class=\"string\">&quot;boolean&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">attr</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_int&quot;</span> <span class=\"attr\">format</span>=<span class=\"string\">&quot;integer&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">attr</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_ref&quot;</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">declare-styleable</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"属性值获取\">属性值获取<a title=\"#属性值获取\" href=\"#属性值获取\"></a></h3>\n<p>xml中设定值：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;com.myapplication.attr.MyAttrView</span><br><span class=\"line\">    android:layout_width=&quot;match_parent&quot;</span><br><span class=\"line\">    android:layout_height=&quot;wrap_content&quot;</span><br><span class=\"line\">    app:attr_str=&quot;hello world&quot;</span><br><span class=\"line\">    app:attr_bool=&quot;true&quot;</span><br><span class=\"line\">    app:attr_int=&quot;99&quot;</span><br><span class=\"line\">    app:attr_ref=&quot;@dimen/dp_100&quot;</span><br><span class=\"line\">    &gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">com.myapplication.attr.MyAttrView</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>代码中解析值：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyView</span><span class=\"params\">(Context context, <span class=\"meta\">@Nullable</span> AttributeSet attrs)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>(context, attrs);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//R.styleable.MyStyleable 指的是想要解析的属性</span></span><br><span class=\"line\">    TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.MyStyleable);</span><br><span class=\"line\">    String strValue = a.getString(R.styleable.MyStyleable_attr_str);</span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> boolValue = a.getBoolean(R.styleable.MyStyleable_attr_bool, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> intValue = a.getInt(R.styleable.MyStyleable_attr_int, <span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"keyword\">float</span> refValue = a.getDimension(R.styleable.MyStyleable_attr_ref, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//typedArray 存放在缓存池，因此用完归还到缓存池</span></span><br><span class=\"line\">    a.recycle();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"自定义属性加载优先级\">自定义属性加载优先级<a title=\"#自定义属性加载优先级\" href=\"#自定义属性加载优先级\"></a></h3>\n<p>自定义属性值的方式目前可以归总为三种：</p>\n<ol>\n<li>在布局文件里定义属性</li>\n<li>在style里定义属性</li>\n<li>在theme里定义属性</li>\n</ol>\n<p>我们知道自定义view中有四个构造方法，其中第四个构造方法是</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">View</span><span class=\"params\">(Context context, <span class=\"meta\">@Nullable</span> AttributeSet attrs, <span class=\"keyword\">int</span> defStyleAttr, <span class=\"keyword\">int</span> defStyleRes)</span></span></span><br></pre></td></tr></table></figure>\n<p>其中后两个入参：</p>\n<ul>\n<li><code>int defStyleAttr</code> 默认属性</li>\n<li><code>int defStyleRes</code> 默认style</li>\n</ul>\n<p>因此view的属性可能来自以下5个地方：</p>\n<ol>\n<li>在布局文件里定义属性。</li>\n<li>在style里定义属性。</li>\n<li>在theme里定义属性。</li>\n<li>默认的属性。</li>\n<li>默认的style。</li>\n</ol>\n<p>根据越精细化指定优先级越高，那么优先级从低到高排列也应该是上边5个地方的顺序了。</p>\n<h3 id=\"自定义属性加载流程\">自定义属性加载流程<a title=\"#自定义属性加载流程\" href=\"#自定义属性加载流程\"></a></h3>\n<p><img src=\"https://note.youdao.com/yws/api/personal/file/2521BA2E75AE4B419E81B7178D42D4F2?method=download&amp;shareKey=df5d25cedeaa926788ce3b70dfb156eb\" alt=\"自定义属性加载流程\" class=\"φbs\"></p>\n<h2 id=\"styles.xml\">styles.xml<a title=\"#styles.xml\" href=\"#styles.xml\"></a></h2>\n<p>它是view中一些列<strong>属性值</strong>的集合，比如height、width、padding等，包括自定义attr属性。</p>\n<h3 id=\"style的使用\">style的使用<a title=\"#style的使用\" href=\"#style的使用\"></a></h3>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resources</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;myStyle&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_str&quot;</span>&gt;</span>hello world<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;attr_bool&quot;</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:background&quot;</span>&gt;</span>@android:color/transparent<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;com.myapplication.attr.MyAttrView</span><br><span class=\"line\">    style=&quot;@style/myStyle&quot;</span><br><span class=\"line\">    android:layout_width=&quot;match_parent&quot;</span><br><span class=\"line\">    android:layout_height=&quot;wrap_content&quot;&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">com.myapplication.attr.MyAttrView</span>&gt;</span></span><br><span class=\"line\">等价于</span><br><span class=\"line\">&lt;com.myapplication.attr.MyAttrView</span><br><span class=\"line\">    android:layout_width=&quot;match_parent&quot;</span><br><span class=\"line\">    android:layout_height=&quot;wrap_content&quot;</span><br><span class=\"line\">    android:background=&quot;@android:color/transparent&quot;</span><br><span class=\"line\">    app:attr_str=&quot;hello world&quot;</span><br><span class=\"line\">    app:attr_bool=&quot;true&quot;&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">com.myapplication.attr.MyAttrView</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"style的继承\">style的继承<a title=\"#style的继承\" href=\"#style的继承\"></a></h3>\n<p>Style的继承主要分两种：</p>\n<ul>\n<li>指定parent继承，主要是第三方module的Style(包括系统内建的或者其他lib)</li>\n<li>点式继承，主要是自己本项目中的style</li>\n</ul>\n<p>继承第三方module的Style：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//继承系统内建的style（继承Framework中theme的属性是需要“android:”开头）</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;GreenText&quot;</span> <span class=\"attr\">parent</span>=<span class=\"string\">&quot;@android:style/TextAppearance&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:textColor&quot;</span>&gt;</span>#00FF00<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">//继承自AppCompat下的style（继承Support Library中theme的属性是不需要“android:”开头的）</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;GreenText&quot;</span> <span class=\"attr\">parent</span>=<span class=\"string\">&quot;TextAppearance.AppCompat&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:textColor&quot;</span>&gt;</span>#00FF00<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">//继承自其他lib的style</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;GreenText&quot;</span> <span class=\"attr\">parent</span>=<span class=\"string\">&quot;@style/BaseGreenText&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:textColor&quot;</span>&gt;</span>#00FF00<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>继承自己本项目中的style：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;GreenText.Large&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:textSize&quot;</span>&gt;</span>22dp<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>继承自己本项目中的style可以不用parent属性指定，但是如果在此种方法中也使用parent，parent中指定的style优先级高于通过点操作符指定的父类style。</p>\n<h2 id=\"themes.xml\">themes.xml<a title=\"#themes.xml\" href=\"#themes.xml\"></a></h2>\n<p>theme是为了Activity/Application复用的<strong>属性值</strong>集合，Theme与Style使用同一个元素标签<code>&lt;style&gt;</code>，区别在于所包含的属性不同，并且使用的地方也不一样。Theme你需要设置到AndroidManifest.xml的<code>&lt;application&gt;</code>或者<code>&lt;activity&gt;</code>标签下，设置后被设置的Activity或整个应用下所有的View都可以使用该<code>&lt;style&gt;</code>里面的属性了。</p>\n<h3 id=\"theme的使用\">theme的使用<a title=\"#theme的使用\" href=\"#theme的使用\"></a></h3>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//定义主题</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;AppTheme&quot;</span> <span class=\"attr\">parent</span>=<span class=\"string\">&quot;Theme.AppCompat.Light.DarkActionBar&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"comment\">&lt;!-- Customize your theme here. --&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorPrimary&quot;</span>&gt;</span>@color/colorPrimary<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorPrimaryDark&quot;</span>&gt;</span>@color/colorPrimaryDark<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorAccent&quot;</span>&gt;</span>@color/colorAccent<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">//application指定</span><br><span class=\"line\">&lt;application</span><br><span class=\"line\">    android:allowBackup=&quot;true&quot;</span><br><span class=\"line\">    android:icon=&quot;@mipmap/ic_launcher&quot;</span><br><span class=\"line\">    android:label=&quot;@string/app_name&quot;</span><br><span class=\"line\">    android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;</span><br><span class=\"line\">    android:supportsRtl=&quot;true&quot;</span><br><span class=\"line\">    android:theme=&quot;@style/AppTheme&quot;&gt;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">activity</span> <span class=\"attr\">android:name</span>=<span class=\"string\">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">intent-filter</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">action</span> <span class=\"attr\">android:name</span>=<span class=\"string\">&quot;android.intent.action.MAIN&quot;</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">category</span> <span class=\"attr\">android:name</span>=<span class=\"string\">&quot;android.intent.category.LAUNCHER&quot;</span> /&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">intent-filter</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">activity</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">application</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>theme中可以自定义很多属性，具体可以查阅官方<a href=\"https://developer.android.com/reference/android/R.styleable.html#Theme\" target=\"_blank\">R.styleable.Theme</a></p>\n<h3 id=\"定义全局view默认样式\">定义全局View默认样式<a title=\"#定义全局view默认样式\" href=\"#定义全局view默认样式\"></a></h3>\n<p>如果是要在theme中定义全局的View或具体控件的属性则需要查看其支持的xml属性配置:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;MyTheme&quot;</span> <span class=\"attr\">parent</span>=<span class=\"string\">&quot;AppTheme&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"comment\">&lt;!--重写系统view的style默认样式--&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:buttonStyle&quot;</span>&gt;</span>@style/myButton<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:checkboxStyle&quot;</span>&gt;</span>@style/myCheckBox<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;myButton&quot;</span> <span class=\"attr\">parent</span>=<span class=\"string\">&quot;@style/Base.Widget.AppCompat.Button&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:background&quot;</span>&gt;</span>@color/colorAccent<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:textColor&quot;</span>&gt;</span>@color/white<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:textAppearance&quot;</span>&gt;</span>@style/Base.TextAppearance.AppCompat.Small<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;myCheckBox&quot;</span> <span class=\"attr\">parent</span>=<span class=\"string\">&quot;@style/Base.Widget.AppCompat.CompoundButton.CheckBox&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:background&quot;</span>&gt;</span>@color/colorPrimaryDark<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:textColor&quot;</span>&gt;</span>@color/white<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:textAppearance&quot;</span>&gt;</span>@style/Base.TextAppearance.AppCompat.Display1<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:checked&quot;</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"material-color-system\">Material Color system<a title=\"#material-color-system\" href=\"#material-color-system\"></a></h3>\n<p>如果使用的是Material Theme，它提供了很多的 color attribute 使用：</p>\n<ul>\n<li>colorPrimary : 顧名思義，就是主要的顏色，這個通常指得是 App 本身產品的代表色，通常也是品牌的主要視覺色</li>\n<li>colorPrimaryVariant：主要顏色的變體，通常會從 colorPrimary 往較淡或較濃的色澤</li>\n<li>colorOnPrimary：字面意思就是主要顏色上頭的顏色，這個顏色通常使用在背景色是主要顏色的元件上頭(例如字樣 Label 、icon 等)</li>\n<li>colorSecondary：app 次要的品牌顏色，這些用於裝飾某些特定需要的 widget</li>\n<li>colorSecondaryVariant：次要顏色的變體，也就是次要顏色偏暗或偏亮的樣式</li>\n<li>colorOnSecondary：用於顯示於次要顏色上元件的顏色</li>\n<li>colorError：顯示錯誤的顏色 (最常見的就是紅色)</li>\n<li>colorOnError：在錯誤顏色上頭元件的顏色</li>\n<li>colorSurface：表層顏色(就是 Sheet 的顏色)</li>\n<li>colorOnSurface：在表層顏色上的的元件顏色</li>\n<li>android:colorBackground：最底的背景色</li>\n<li>colorOnBackground：用於對底背景色上頭的元件用的顏色</li>\n</ul>\n<p>利用这些属性，搭配上面的那些技巧，可以組合出很棒的效果。</p>\n<p><img src=\"https://note.youdao.com/yws/api/personal/file/FE63BF0B70BD477DA0D5C05D7C445854?method=download&amp;shareKey=e048c21b4e6496052081778c8d7a1ba6\" alt=\"Material_Color_system图示\" class=\"φbs\"></p>\n<h3 id=\"版本兼容\">版本兼容<a title=\"#版本兼容\" href=\"#版本兼容\"></a></h3>\n<p>随着android版本升级，不同版本下的api可能不一样，可以通过在res文件夹下创建指定values版本的style来解决兼容问题：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">res/values/styles.xml        # 如果没有指定版本，默认使用此style中的定义</span><br><span class=\"line\">res/values-v21/styles.xml    # 对于Api 21以上的版本会优先使用此style种的定义</span><br></pre></td></tr></table></figure>\n<p>举个例子，比如Android5.0(API level 21)及以上版本汇总，增加了window的切换动画。</p>\n<p>默认<strong>res/values/styles.xml</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resources</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- base set of styles that apply to all versions --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;BaseAppTheme&quot;</span> <span class=\"attr\">parent</span>=<span class=\"string\">&quot;Theme.AppCompat.Light.DarkActionBar&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorPrimary&quot;</span>&gt;</span>@color/primaryColor<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorPrimaryDark&quot;</span>&gt;</span>@color/primaryTextColor<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorAccent&quot;</span>&gt;</span>@color/secondaryColor<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- declare the theme name that&#x27;s actually applied in the manifest file --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;AppTheme&quot;</span> <span class=\"attr\">parent</span>=<span class=\"string\">&quot;BaseAppTheme&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<p>Api 21的版本<strong>res/values-v21/styles.xml</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">resources</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- extend the base theme to add styles available only with API level 21+ --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;AppTheme&quot;</span> <span class=\"attr\">parent</span>=<span class=\"string\">&quot;BaseAppTheme&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:windowActivityTransitions&quot;</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:windowEnterTransition&quot;</span>&gt;</span>@android:transition/slide_right<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">        <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;android:windowExitTransition&quot;</span>&gt;</span>@android:transition/slide_left<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>这种方式还可用于处理其他资源的不同版本兼容问题。</p>\n<h2 id=\"@android,-?attr/-和-?android-的区别\">@android, ?attr/ 和 ?android 的区别<a title=\"#@android,-?attr/-和-?android-的区别\" href=\"#@android,-?attr/-和-?android-的区别\"></a></h2>\n<p>开发过程中经常遇到&quot;@android&quot;、“?attr/“或者”?android”。例如，设置一些可点击组件的波纹效果时，我们会用到：<code>android:foreground=&quot;?attr/selectableItemBackground&quot;</code>。有同学可能就懵逼了，到底什么时候用&quot;@android&quot;什么时候用&quot;?attr/&quot;呢？</p>\n<p>其实<code>@</code>和<code>?</code>的区别是：</p>\n<ul>\n<li>@：引用固定的系统资源</li>\n<li>?: 引用attr指定属性资源</li>\n</ul>\n<p>最为常见的引用系统固定资源格式如下：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@[&lt;package_name&gt;:]&lt;resource_type&gt;&#x2F;&lt;resource_name&gt;</span><br></pre></td></tr></table></figure>\n<p>这种方式是最为常见的，<strong>直接获取对应的包下的资源</strong>，一般在相同的包下，可以省略包名，比如为 TextView 设置文字时，就可以通过这样的方式来获取我们应用内定义的 string 资源：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android:text=&quot;@string/hello&quot;</span><br></pre></td></tr></table></figure>\n<h3 id=\"@android:-引用安卓内建的系统资源\">@android: 引用安卓内建的系统资源<a title=\"#@android:-引用安卓内建的系统资源\" href=\"#@android:-引用安卓内建的系统资源\"></a></h3>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android:background=“@android:drawable/ic_menu_delete”</span><br></pre></td></tr></table></figure>\n<p>对应的是当前compileSdkVersion版本下的android系统下的固定资源。</p>\n<h3 id=\"?attr/-引用应用内的属性资源\">?attr/ 引用应用内的属性资源<a title=\"#?attr/-引用应用内的属性资源\" href=\"#?attr/-引用应用内的属性资源\"></a></h3>\n<p>通常我们会在 values/ 文件夹下建一个 attrs 文件，在这里保存一些我们自己的 style 属性，其实这些属性就可以通过 ?attr/ 这种方式来引用了：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//attrs文件中定义</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">attr</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorReallyGreen&quot;</span> <span class=\"attr\">format</span>=<span class=\"string\">&quot;color&quot;</span>/&gt;</span></span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">//view中引用</span><br><span class=\"line\">android:background=&quot;?attr/colorReallyGreen&quot;</span><br></pre></td></tr></table></figure>\n<p>当然，要想让该属性起作用还需要在style或者theme中下指定值：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;AppTheme&quot;</span> <span class=\"attr\">parent</span>=<span class=\"string\">&quot;Theme.AppCompat.Light.DarkActionBar&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"comment\">&lt;!-- Customize your theme here. --&gt;</span></span></span><br><span class=\"line\">    ...</span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;colorReallyGreen&quot;</span>&gt;</span>@color/colorReallyGreen<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>由于在 layout 中，可以自动识别出当前所需的是属性资源，所以可以省略 attr/ 而直接使用 ?colorReallyGreen 就可以了。</p>\n<h3 id=\"?android:-引用系统内建的属性资源\">?android: 引用系统内建的属性资源<a title=\"#?android:-引用系统内建的属性资源\" href=\"#?android:-引用系统内建的属性资源\"></a></h3>\n<p>与 ?attr/ 类似，通过这种方式可以直接访问到安卓内建的属性资源，只不过是省略了 attr/ 而已，比如给 TextView 引用一个系统内的 style buttonStyleSmall：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;TextView</span><br><span class=\"line\">    style=&quot;?android:buttonStyleSmall&quot;</span><br><span class=\"line\">    android:layout_width=&quot;match_parent&quot;</span><br><span class=\"line\">    android:layout_height=&quot;wrap_content&quot;</span><br><span class=\"line\">    android:text=&quot;You Are Beautiful&quot; /&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"总结\">总结<a title=\"#总结\" href=\"#总结\"></a></h2>\n<p>以上是我针对自定义属性以及自定义style和自定义theme的相关知识点总结，这部分是自定义view的基础，内容还是比较多的，有一部分没有涉及到，例如主题切换，感兴趣的童鞋可以自行学习，喜欢本篇文章的点个赞加个关注，记得收藏哦。</p>\n<h2 id=\"参考\">参考<a title=\"#参考\" href=\"#参考\"></a></h2>\n<ul>\n<li><a href=\"https://developer.android.com/guide/topics/ui/look-and-feel/themes?hl=zh-cn\">https://developer.android.com/guide/topics/ui/look-and-feel/themes?hl=zh-cn</a></li>\n<li><a href=\"https://medium.com/jastzeonic/style-theme-%E7%9A%84%E9%82%A3%E4%B8%80%E5%85%A9%E4%BB%B6%E4%BA%8B%E6%83%85-8499a6603bbb\">https://medium.com/jastzeonic/style-theme-的那一兩件事情-8499a6603bbb</a></li>\n<li><a href=\"https://mp.weixin.qq.com/s/Vo8MXlHF5ur2QsZxWAccIg\">https://mp.weixin.qq.com/s/Vo8MXlHF5ur2QsZxWAccIg</a></li>\n<li><a href=\"https://juejin.cn/post/6844904200673968141#heading-8\">https://juejin.cn/post/6844904200673968141#heading-8</a></li>\n</ul>\n","prev":{"title":"Android开发数据持久化有哪些形式","link":"posts/1615050026"},"next":{"title":"Android开发之玩转Android属性动画","link":"posts/1614527870"},"plink":"https://blog.ixin.run/posts/1614958762/","toc":[{"id":"资源位置","title":"资源位置","index":"1"},{"id":"attrs.xml","title":"attrs.xml","index":"2","children":[{"id":"属性声明","title":"属性声明","index":"2.1"},{"id":"属性值获取","title":"属性值获取","index":"2.2"},{"id":"自定义属性加载优先级","title":"自定义属性加载优先级","index":"2.3"},{"id":"自定义属性加载流程","title":"自定义属性加载流程","index":"2.4"}]},{"id":"styles.xml","title":"styles.xml","index":"3","children":[{"id":"style的使用","title":"style的使用","index":"3.1"},{"id":"style的继承","title":"style的继承","index":"3.2"}]},{"id":"themes.xml","title":"themes.xml","index":"4","children":[{"id":"theme的使用","title":"theme的使用","index":"4.1"},{"id":"定义全局view默认样式","title":"定义全局View默认样式","index":"4.2"},{"id":"material-color-system","title":"Material Color system","index":"4.3"},{"id":"版本兼容","title":"版本兼容","index":"4.4"}]},{"id":"@android,-?attr/-和-?android-的区别","title":"@android, ?attr&#x2F; 和 ?android 的区别","index":"5","children":[{"id":"@android:-引用安卓内建的系统资源","title":"@android: 引用安卓内建的系统资源","index":"5.1"},{"id":"?attr/-引用应用内的属性资源","title":"?attr&#x2F; 引用应用内的属性资源","index":"5.2"},{"id":"?android:-引用系统内建的属性资源","title":"?android: 引用系统内建的属性资源","index":"5.3"}]},{"id":"总结","title":"总结","index":"6"},{"id":"参考","title":"参考","index":"7"}],"reward":true,"copyright":{"author":"i猩人","link":"<a href=\"https://blog.ixin.run/posts/1614958762/\" title=\"Android开发Style和Theme知识面总结\">https://blog.ixin.run/posts/1614958762/</a>","license":"本文遵循<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\"rel=\"external nofollow\" target=\"_blank\"> CC 4.0 BY-SA </a>版权协议，转载请附上原文出处链接及本声明。"}}