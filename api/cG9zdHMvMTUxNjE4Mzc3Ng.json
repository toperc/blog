{"title":"音视频开发相关基础概念","date":"2018-01-17T10:09:36.000Z","date_formatted":{"ll":"2018年1月17日","L":"2018/01/17","MM-DD":"01-17"},"link":"posts/1516183776","comments":true,"tags":["音视频"],"categories":["Android"],"updated":"2021-01-29T12:51:44.653Z","content":"<p>早前自己仅仅实现过视频播放相关技术方案:VideoView、mediaplayer结合SurfaceView，这只是客户端播放功能。对于视频处理形式分为点播和流媒体播放，同时又包含音视频数据的采集和播放两方面。</p>\n<a id=\"more\"></a>\n<h2 id=\"理解几个概念\">理解几个概念<a title=\"#理解几个概念\" href=\"#理解几个概念\"></a></h2>\n<ol>\n<li>视频</li>\n<li>流媒体</li>\n<li>分辨率</li>\n<li>码流</li>\n<li>帧率</li>\n<li>比特率</li>\n<li>采样率</li>\n</ol>\n<h2 id=\"多媒体格式分类\">多媒体格式分类<a title=\"#多媒体格式分类\" href=\"#多媒体格式分类\"></a></h2>\n<ul>\n<li>MPEG</li>\n<li>MPEG Audio Layer 3</li>\n<li>MPEG-4</li>\n<li>MKV</li>\n<li>3GP</li>\n<li>AVI</li>\n<li>MOV</li>\n<li>WAV</li>\n<li>FLV</li>\n<li>RMVB</li>\n</ul>\n<p>参考：<a href=\"http://blog.csdn.net/xx326664162/article/details/51784440\">http://blog.csdn.net/xx326664162/article/details/51784440</a></p>\n<h2 id=\"流媒体协议\">流媒体协议<a title=\"#流媒体协议\" href=\"#流媒体协议\"></a></h2>\n<ul>\n<li>RTP 传输层以UDP传输，主要传输视频数据。是以固定的数据率在网络上发送数据，客户端也按照这种速度观看影视文件，当影视画面播放过后，就不可以再重复播放，除非重新向服务器端请求数据。</li>\n<li>RTCP 和RTP属于姐妹协议，同一层同一种传输方式，主要传输视频质量。</li>\n<li>RTSP 用来控制声音或影像的多媒体串流协议。</li>\n<li>RTMP Adobe公司为Flash播放器和服务器之间音视频传输开放的协议。</li>\n<li>HLS 主要应用在iOS系统，和上边不同之处是将整个视频流文件分成许多小文件，然后客户端不断下载这些小文件进行播放。</li>\n<li>MMS （Microsoft Media Server）是一种串流媒体传送协议，用来访问并流式接收Windows Media服务器中.asf文件的一种协议。</li>\n</ul>\n<p>参考：<a href=\"http://blog.csdn.net/xx326664162/article/details/51781399\">http://blog.csdn.net/xx326664162/article/details/51781399</a></p>\n<h2 id=\"android音视频开发流程\">android音视频开发流程<a title=\"#android音视频开发流程\" href=\"#android音视频开发流程\"></a></h2>\n<p><strong>播放流程</strong>: 获取流–&gt;解码–&gt;播放<br>\n<strong>录制播放流程</strong>: 录制音频视频–&gt;剪辑–&gt;编码–&gt;上传服务器<br>\n<strong>直播流程</strong>: 录制音视频–&gt;编码–&gt;流媒体传输–&gt;服务器—&gt;流媒体传输到其他app–&gt;解码–&gt;播放</p>\n<p>几个重要的环节：</p>\n<ol>\n<li>录制音视频 AudioRecord/MediaRecord</li>\n<li>音视频编辑 mp4parser或ffmpeg</li>\n<li>音视频编码 aac&amp;h264</li>\n<li>上传大文件 网络框架,进度监听,断点续传</li>\n<li>流媒体传输 流媒体传输协议rtmp rtsp hls</li>\n<li>音视频解码 aac&amp;h264（MPEG-4Part10，h264的功能分为两层：视频编解码层（VCL）和网络提取层（NAL））</li>\n<li>渲染播放 MediaPlayer</li>\n</ol>\n<h2 id=\"视频编辑可行性开源方案\">视频编辑可行性开源方案<a title=\"#视频编辑可行性开源方案\" href=\"#视频编辑可行性开源方案\"></a></h2>\n<ul>\n<li>ffmpeg(功能强大，包含libavcodec(音视频解码库)和libavformat（音视频格式转换库）)</li>\n<li>MediaCodec （android自带）</li>\n<li>ijkplayer (bilibili开源的)</li>\n<li>mp4parser （软解软编音视频混合）</li>\n<li>Vitamio</li>\n</ul>\n<h2 id=\"常见问题\">常见问题<a title=\"#常见问题\" href=\"#常见问题\"></a></h2>\n<ol>\n<li>ijkplayer播放rtmp直播流，延迟明显</li>\n<li>全屏播放</li>\n<li>有时候会开始直播时出现黑屏 （确定下视频源的编码方式,ijk默认只带了h264解码code）</li>\n<li>一直是只有声音没有图像</li>\n<li>有时候会出现花屏</li>\n<li>解码方式设置</li>\n<li>如何区分点播直播</li>\n<li>是否需要开启硬件加速</li>\n<li>如何设置后台播放</li>\n<li>视频加载速度慢 （大多数根据CDN加速服务的质量）</li>\n<li>怎么静音和非静音</li>\n<li>适配问题,对于不同的cpu架构,需要编译不同的so库</li>\n<li>播放视频有的设备声画不同步</li>\n<li>如何查看m3u8时长</li>\n<li>如何改变播放质量（这个由视频源控制）</li>\n<li>倍速播放</li>\n<li>为什么往前拖动进度条后，还会往后退几秒 （seek只支持关键帧，出现这个情况就是原始的视频文件中i 帧比较少，播放器会在拖动的位置找最近的关键帧）</li>\n<li>怎样添加字幕</li>\n<li>如何设置硬解</li>\n</ol>\n<p>参考：<a href=\"https://www.jianshu.com/p/8436c7353296\">https://www.jianshu.com/p/8436c7353296</a></p>\n<h2 id=\"开发参考\">开发参考<a title=\"#开发参考\" href=\"#开发参考\"></a></h2>\n<ul>\n<li><a href=\"http://blog.campusapp.cn/2016/01/30/2016-01-30-Android%E4%BD%BF%E7%94%A8FFMpeg%E5%AE%9E%E7%8E%B0%E6%8E%A8%E9%80%81%E8%A7%86%E9%A2%91%E7%9B%B4%E6%92%AD%E6%B5%81%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8/\" target=\"_blank\">Android使用FFmpeg实现推送视频直播流到服务器</a></li>\n<li><a href=\"http://blog.campusapp.cn/2016/01/30/2016-01-30-%E5%9C%A8%E5%90%84%E7%AB%AF%E5%AE%9E%E7%8E%B0Rtmp%E5%92%8Chls%E6%B5%81%E8%A7%86%E9%A2%91%E7%9A%84%E6%92%AD%E6%94%BE/\" target=\"_blank\">在各端实现Rtmp和hls视频流的播放 </a></li>\n<li><a href=\"https://www.cnblogs.com/dyllove98/p/3192090.html\" target=\"_blank\">android mediaplayer属性和方法</a></li>\n<li><a href=\"http://blog.csdn.net/luoshengyang/article/details/8661317\" target=\"_blank\">Android视图SurfaceView的实现原理分析</a></li>\n</ul>\n","prev":{"title":"Android开发知识归总","link":"posts/1516426422"},"next":{"title":"数据结构整体概括","link":"posts/1515751776"},"plink":"https://blog.ixin.run/posts/1516183776/","toc":[{"id":"理解几个概念","title":"理解几个概念","index":"1"},{"id":"多媒体格式分类","title":"多媒体格式分类","index":"2"},{"id":"流媒体协议","title":"流媒体协议","index":"3"},{"id":"android音视频开发流程","title":"android音视频开发流程","index":"4"},{"id":"视频编辑可行性开源方案","title":"视频编辑可行性开源方案","index":"5"},{"id":"常见问题","title":"常见问题","index":"6"},{"id":"开发参考","title":"开发参考","index":"7"}],"reward":true,"copyright":{"author":"i猩人","link":"<a href=\"https://blog.ixin.run/posts/1516183776/\" title=\"音视频开发相关基础概念\">https://blog.ixin.run/posts/1516183776/</a>","license":"本文遵循<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\"rel=\"external nofollow\" target=\"_blank\"> CC 4.0 BY-SA </a>版权协议，转载请附上原文出处链接及本声明。"}}