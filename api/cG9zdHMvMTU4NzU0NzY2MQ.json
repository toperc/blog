{"title":"针对极光推送送达率的探究","date":"2020-04-22T09:27:41.000Z","date_formatted":{"ll":"2020年4月22日","L":"2020/04/22","MM-DD":"04-22"},"link":"posts/1587547661","comments":true,"tags":["Android","极光推送"],"categories":["Android"],"updated":"2021-02-03T02:09:08.597Z","content":"<p>前段时间内部一个应用对接了极光推送，开发人当然是我咯，根据多年对极光的认可这块对接还是很有信心的。毕竟是内部系统，送达率要求还是很高的，业务实时性需要，所以产品这块非常看重送达率，我对他说极光的实时送达率很客观的，有实验室数据，但是他还是希望我帮他提供一个可靠的数据，下边是我对实时送达率的一个分析。</p>\n<p>当然，针对推送作为开发的我更关注整体送达率（准确送达率），文中也有提到，最简单可靠的方式就是提高app的存活率。</p>\n<a id=\"more\"></a>\n<h2 id=\"先了解三个概念\">先了解三个概念<a title=\"#先了解三个概念\" href=\"#先了解三个概念\"></a></h2>\n<ol>\n<li><strong>目标数</strong>：一个月内与极光服务器有过连接的用户（设备）。</li>\n</ol>\n<p>这部分数据包含：app卸载的，app在线的，app离线的（未启动或者未开启推送的）<br>\n所以数据量非常庞大，我们的业务受节假日影响，有相关波动，所以这个维度比较虚。</p>\n<ol start=\"2\">\n<li><strong>在线数</strong>：消息推送时目标用户在线。</li>\n</ol>\n<p>这部分数据指得是实时与极光服务器保持常连接的用户或设备数。</p>\n<ol start=\"3\">\n<li><strong>送达数</strong>：消息发送到达客户端的数量。</li>\n</ol>\n<p>这部分数据包含：在线消息数和离线消息数，其中离线消息是默认保存一天的，也就是说一天只内只要启动应用开启推送都可以接收到的。</p>\n<h2 id=\"准确的测算方式\">准确的测算方式<a title=\"#准确的测算方式\" href=\"#准确的测算方式\"></a></h2>\n<p>最准确的测算极光送达率方法应该按照在“某个时间段”并且“单一发送消息”和“大量用户”支撑，遵循以下公式：</p>\n<p><strong>rate = （在线接收数+离线接收数）/ 有效目标数</strong></p>\n<p><strong>有效目标数</strong>指的是一天之内启动应用的用户数，目前极光推送官方没有离线接收数和有效目标数这两维度，并且我们的消息是零零散散发送的，这就给我们测算造成了一定困难。</p>\n<p>之前也是因为没有离线接收这个数据，当时用的是送达数/目标数，测算出主项目那边大概是30%，内部项目我测算了一下占到55%，内部项目虽然客观，但这个数据不是我们想要的。</p>\n<p>根据目前极光给出的数据维度，只能按照某个短时间内测算实时送达率，即：送达数/在线数，忽略掉离线的那部分。</p>\n<h2 id=\"实例\">实例<a title=\"#实例\" href=\"#实例\"></a></h2>\n<p>前段时间内部项目有新版本需要上线，推送了一条消息给全国门店：</p>\n<p><img src=\"https://note.youdao.com/yws/api/personal/file/0E163DFEE86B4702B3DCE9C903F07735?method=download&amp;shareKey=996ec4f50b7c15d53af39ed6463e4402\" alt=\"推送历史记录\" class=\"φbs\"></p>\n<p>第一部分是瞬间全国的推送（包含干扰部分），第二部分是相邻时间段其他零星消息的干扰情况，大概一分钟是接收30条。</p>\n<p>针对全国的推送上图第一部分分析得知大概一次推送分三批完成，这是我们后端对接极光的一种推送方案，具体情况如下：</p>\n<p>瞬间推送第一批：<br>\n<img src=\"https://note.youdao.com/yws/api/personal/file/05C3C0BFFE56460B93ACAC4D088033B3?method=download&amp;shareKey=9f13179a01f022dd4205ab76d8d65ecd\" alt=\"瞬间全国推送第一批\"></p>\n<p>瞬间推送第二批：<br>\n<img src=\"https://note.youdao.com/yws/api/personal/file/012291FEE81B488882A0DF68D86D1141?method=download&amp;shareKey=c8f0f51f0d177e27fd25fd26b67b241c\" alt=\"瞬间全国推送第二批\"></p>\n<p>瞬间推送第三批：<br>\n<img src=\"https://note.youdao.com/yws/api/personal/file/EDC87B84A536422597FBEA4428B94EF2?method=download&amp;shareKey=dbd11800005171f763258c33a2177b4c\" alt=\"瞬间全国推送第三批\"></p>\n<p>因此根据全国推送并去除干扰消息，得出实时极光送达率：</p>\n<p><strong>rate = （510+479+357-30-零星离线接收的）/ (483+466+334)  约=  100%</strong></p>\n<p>目前是测算实时在线到达率结果是可观的，离线推送的部分后边可以看看能否通过其他渠道去了解。</p>\n<p>这里也有人有相关的提问：<a href=\"https://community.jiguang.cn/question/35820\">https://community.jiguang.cn/question/35820</a></p>\n","prev":{"title":"Alibaba插件代码质量检测问题归总","link":"posts/1589521857"},"next":{"title":"WebView高度自适应方案探究","link":"posts/1586879992"},"plink":"https://blog.ixin.run/posts/1587547661/","toc":[{"id":"先了解三个概念","title":"先了解三个概念","index":"1"},{"id":"准确的测算方式","title":"准确的测算方式","index":"2"},{"id":"实例","title":"实例","index":"3"}],"reward":true,"copyright":{"author":"i猩人","link":"<a href=\"https://blog.ixin.run/posts/1587547661/\" title=\"针对极光推送送达率的探究\">https://blog.ixin.run/posts/1587547661/</a>","license":"本文遵循<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\"rel=\"external nofollow\" target=\"_blank\"> CC 4.0 BY-SA </a>版权协议，转载请附上原文出处链接及本声明。"}}